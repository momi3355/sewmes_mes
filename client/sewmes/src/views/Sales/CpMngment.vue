<template>
  <div class="container-fluid p-3">
    <!-- ğŸ“¦ ì£¼ë¬¸ ëª©ë¡ + ìƒì„¸ -->
    <div class="container-fluid py-4" id="odlist">
      <!-- ë†’ì´ í†µì¼ì„ ìœ„í•´ rowì— height ì§€ì • -->
      <div class="row gx-4" style="height: 800px;">
        
        <!-- ì£¼ë¬¸ì„œ ëª©ë¡ -->
        <div class="col-lg-6 mb-4">
              <tabulator-card
                card-title="ì£¼ë¬¸ì„œ ëª©ë¡"
                :table-data="companyData"
                :table-columns="companyColumns"
                :tabulator-options="tabulatorEvent"
                :on="tabulatorEvent"
                 height="750px"
                style="height: 100%;"
              />
        </div>

        <!-- ì£¼ë¬¸ ìƒì„¸ + ë“±ë¡ -->
<div class="col-lg-6 mb-4">
          <div class="card">
            <div class="card-body" id="cardbody">
              <table class="table table-bordered table-sm align-middle mb-2">
                <tbody id="orderDetail">
                  <tr>
                    <th style="width: 30%;">ì—…ì²´ëª…</th>
                    <td>
                      <!-- <div class="position-relative" @focusin="listOpen = true" @focusout="onFocusOut">
                        <input type="text" class="form-control" v-model="ordercurrentOrder.cp_name" />
                        <ul class="dropdown-menu show" v-if="listOpen" style="position:absolute; top:100%; left:0; z-index: 1000;">
                          <li v-for="(company, index) in filteredCompanyList" :key="index">
                            <a class="dropdown-item" href="#" @mousedown.prevent @click="selectCompany(company)">
                              {{ company.cp_name }}
                            </a>
                          </li>
                        </ul>
                      </div> -->
                    </td>
                  </tr>
                  <tr>
                    <th>ì—…ì²´ì—°ë½ì²˜</th>
                    <td><input type="tel" class="form-control" /></td>
                  </tr>
                  <tr>
                    <th>ì£¼ì†Œ</th>
                    <td><input type="text" class="form-control" /></td>
                  </tr>
                  <tr>
                    <th>ì£¼ë¬¸ì¼ì</th>
                    <td><input type="date" class="form-control" /></td>
                  </tr>
                  <tr>
                    <th>ë‚©ê¸°ì¼ì</th>
                    <td><input type="date" class="form-control" /></td>
                  </tr>
                  <tr>
                    <th>ì˜ì—…ë‹´ë‹¹ì</th>
                    <td><input type="text" class="form-control" /></td>
                  </tr>
                  <tr>
                    <th>ì˜ì—…ë‹´ë‹¹ì ì—°ë½ì²˜</th>
                    <td><input type="tel" class="form-control"  /></td>
                  </tr>
                  <tr>
                    <th>ë¹„ê³ </th>
                    <td><textarea class="form-control" rows="2" ></textarea></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<!-- <script setup>
import { ref, computed, onMounted } from 'vue';
import axios from 'axios';

// ì—…ì²´ëª… ì¶œë ¥ ì»¬ëŸ¼
const companyColumns = [
  { title: "ìˆœë²ˆ", formatter: "rownum", width: 80 },
  { title: "ì£¼ë¬¸ì½”ë“œ", field: "order_code", width: 108 },
  { title: "ì—…ì²´ëª…", field: "cp_name"},
  { title: "ì´ìˆ˜ëŸ‰", field: "total_qty", width: 94 },
  { title: "ì£¼ë¬¸ì¼ì", field: "order_date", width: 110 },
  { title: "ë‚©ê¸°ì¼ì", field: "dead_date", width: 110 },
  { title: "ìƒíƒœ", field: "order_state", width: 90, 
    formatter:(cell)=>{
    const code = cell.getValue();
    const matched = statecode.value.find(item => item.detail_code == code);
    return matched ? matched.detail_name : code;
  } }
];

async function fetchOrders() {
  const res = await axios.get('/api/companyList');
  orders.value = res.data;
}

onMounted(async () => {
  await Promise.all([
    fetchOrders(),
  ]);
});

</script> -->

<style scoped>
/* ê¸°ì¡´ ì¡°íšŒí˜ì´ì§€ ìŠ¤íƒ€ì¼ ìœ ì§€ */
.search-color { margin: 10px; padding: 20px; border-radius: 1rem; background-color: #fff; }

#cardbody{
  padding: 10px;
}

</style>
